document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("theme-toggle"),t=localStorage.getItem("theme");t&&(document.documentElement.setAttribute("data-theme",t),"dark"===t&&(e.checked=!0)),e.addEventListener("change",function(){this.checked?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))});const n=document.getElementById("myModal"),a=document.getElementById("modalBtn"),o=document.getElementsByClassName("close")[0];n&&a&&o&&(a.onclick=function(){n.style.display="block"},o.onclick=function(){n.style.display="none"},window.onclick=function(e){e.target==n&&(n.style.display="none")});const c=document.querySelectorAll(".reference-card"),d=document.getElementById("referenceCarouselInner"),i=document.getElementById("referenceModalLabel"),r=document.getElementById("referenceModalDesc");let l=[],s="",m="";c.forEach(e=>{e.addEventListener("click",()=>{l=function(e){const t=e.getAttribute("data-images");if(t)return t.split(",").map(e=>e.trim()).filter(Boolean);const n=e.getAttribute("data-img");return n?[n]:[]}(e),s=e.getAttribute("data-title")||"",m=e.getAttribute("data-desc")||"",d.innerHTML=l.map((e,t)=>`\n      <div class="carousel-item${0===t?" active":""}">\n        <img src="${e}" class="d-block w-100 rounded" alt="${s}">\n      </div>\n    `).join("");const t=document.querySelector("#referenceCarousel .carousel-indicators");t&&(t.innerHTML=l.map((e,t)=>`<button type="button"\n              data-bs-target="#referenceCarousel"\n              data-bs-slide-to="${t}"\n              ${0===t?'class="active" aria-current="true"':""}\n              aria-label="${t+1}. kÃ©p"></button>`).join("")),i.textContent=s,r.textContent=m})});const u=document.getElementById("theme-toggle"),g=u?u.querySelector(".theme-icon"):null;if(g){const b=220;function y(e){g.style.transition="opacity 0.22s, filter 0.22s",g.style.opacity="0",g.style.filter="blur(2px)",setTimeout(()=>{var t;t=e,g&&(g.textContent="dark"===t?"ðŸŒ™":"ðŸŒž"),g.style.opacity="1",g.style.filter="none"},b)}function h(e){document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),y(e)}}const p=localStorage.getItem("theme");p?h(p):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?h("dark"):h("light"),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")||h(e.matches?"dark":"light")}),u&&u.addEventListener("click",()=>{h("light"===document.documentElement.getAttribute("data-theme")?"dark":"light")});const f=new window.IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("inview"),f.unobserve(e.target))})},{threshold:.12});document.querySelectorAll(".card, .reference-card").forEach(e=>{e.classList.add("card-animate"),f.observe(e)}),document.querySelectorAll(".btn, .btn-outline-primary, .btn-primary").forEach(e=>{e.addEventListener("click",function(t){const n=document.createElement("span");n.style.position="absolute",n.style.borderRadius="50%",n.style.transform="translate(-50%, -50%)",n.style.background="rgba(21,101,192,0.18)",n.style.pointerEvents="none",n.style.zIndex=2;const a=e.getBoundingClientRect(),o=1.2*Math.max(a.width,a.height);n.style.width=n.style.height=o+"px",n.style.left=t.clientX-a.left+"px",n.style.top=t.clientY-a.top+"px",n.style.opacity=1,n.style.transition="opacity 0.5s, transform 0.5s",e.appendChild(n),setTimeout(()=>{n.style.opacity=0,n.style.transform="scale(2.5)"},10),setTimeout(()=>n.remove(),510)})}),function(){function e(){if(!window.gtagScriptLoaded){var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-W3YJDBZ1JT",document.head.appendChild(e),e.onload=function(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],window.gtag=e,e("js",new Date),e("config","G-W3YJDBZ1JT",{anonymize_ip:!0})},window.gtagScriptLoaded=!0}}function t(t){localStorage.setItem("analyticsConsent",t),"accepted"===t&&e()}function n(){var n=document.getElementById("analyticsConsentModal"),a=document.getElementById("acceptAnalytics"),o=document.getElementById("declineAnalytics"),c=document.getElementById("openAnalyticsConsent");if(n){a&&a.addEventListener("click",function(){t("accepted"),r()}),o&&o.addEventListener("click",function(){t("declined"),r()}),c&&c.addEventListener("click",function(e){e.preventDefault(),i()});var d=localStorage.getItem("analyticsConsent");d||setTimeout(i,100),"accepted"===d&&e()}function i(){r();var e=document.createElement("div");e.className="modal-backdrop fade show",document.body.appendChild(e),n.classList.add("show"),n.style.display="block",n.setAttribute("aria-modal","true"),n.removeAttribute("aria-hidden"),document.body.classList.add("modal-open")}function r(){n&&(n.classList.remove("show"),n.style.display="none",n.setAttribute("aria-hidden","true"),n.removeAttribute("aria-modal"));var e=document.querySelector(".modal-backdrop");e&&e.remove(),document.body.classList.remove("modal-open")}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}(),document.addEventListener("click",function(e){var t=document.getElementById("navbarNav"),n=document.querySelector(".navbar-toggler");t&&n&&(t.classList.contains("show")&&(t.contains(e.target)||n.contains(e.target)||bootstrap.Collapse.getOrCreateInstance(t).hide()))})});