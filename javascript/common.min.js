document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("theme-toggle"),t=localStorage.getItem("theme");t&&(document.documentElement.setAttribute("data-theme",t),"dark"===t&&(e.checked=!0)),e.addEventListener("change",(function(){this.checked?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))}));const n=document.getElementById("myModal"),a=document.getElementById("modalBtn"),o=document.getElementsByClassName("close")[0];n&&a&&o&&(a.onclick=function(){n.style.display="block"},o.onclick=function(){n.style.display="none"},window.onclick=function(e){e.target==n&&(n.style.display="none")});const c=document.querySelectorAll(".reference-card"),r=document.getElementById("referenceCarouselInner"),l=document.getElementById("referenceModalLabel"),s=document.getElementById("referenceModalDesc");let i=[],d="",m="";c.forEach((e=>{e.addEventListener("click",(()=>{i=function(e){const t=e.getAttribute("data-images");if(t)return t.split(",").map((e=>e.trim())).filter(Boolean);const n=e.getAttribute("data-img");return n?[n]:[]}(e),d=e.getAttribute("data-title")||"",m=e.getAttribute("data-desc")||"",r.innerHTML=i.map(((e,t)=>`\n      <div class="carousel-item${0===t?" active":""}">\n        <img src="${e}" class="d-block w-100 rounded" alt="${d}">\n      </div>\n    `)).join("");const t=document.querySelector("#referenceCarousel .carousel-indicators");t&&(t.innerHTML=i.map(((e,t)=>`<button type="button"\n              data-bs-target="#referenceCarousel"\n              data-bs-slide-to="${t}"\n              ${0===t?'class="active" aria-current="true"':""}\n              aria-label="${t+1}. kÃ©p"></button>`)).join("")),l.textContent=d,s.textContent=m}))}));const u=document.getElementById("theme-toggle"),g=u?u.querySelector(".theme-icon"):null;if(g){const p=220;function y(e){g.style.transition="opacity 0.22s, filter 0.22s",g.style.opacity="0",g.style.filter="blur(2px)",setTimeout((()=>{var t;t=e,g&&(g.textContent="dark"===t?"ðŸŒ™":"ðŸŒž"),g.style.opacity="1",g.style.filter="none"}),p)}function h(e){document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),y(e)}}const f=localStorage.getItem("theme");f?h(f):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?h("dark"):h("light"),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{localStorage.getItem("theme")||h(e.matches?"dark":"light")})),u&&u.addEventListener("click",(()=>{h("light"===document.documentElement.getAttribute("data-theme")?"dark":"light")}));const b=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("inview"),b.unobserve(e.target))}))}),{threshold:.12});document.querySelectorAll(".card, .reference-card").forEach((e=>{e.classList.add("card-animate"),b.observe(e)})),document.querySelectorAll(".btn, .btn-outline-primary, .btn-primary").forEach((e=>{e.addEventListener("click",(function(t){const n=document.createElement("span");n.style.position="absolute",n.style.borderRadius="50%",n.style.transform="translate(-50%, -50%)",n.style.background="rgba(21,101,192,0.18)",n.style.pointerEvents="none",n.style.zIndex=2;const a=e.getBoundingClientRect(),o=1.2*Math.max(a.width,a.height);n.style.width=n.style.height=o+"px",n.style.left=t.clientX-a.left+"px",n.style.top=t.clientY-a.top+"px",n.style.opacity=1,n.style.transition="opacity 0.5s, transform 0.5s",e.appendChild(n),setTimeout((()=>{n.style.opacity=0,n.style.transform="scale(2.5)"}),10),setTimeout((()=>n.remove()),510)}))})),document.addEventListener("click",(function(e){var t=document.getElementById("navbarNav"),n=document.querySelector(".navbar-toggler");t&&n&&(t.classList.contains("show")&&(t.contains(e.target)||n.contains(e.target)||bootstrap.Collapse.getOrCreateInstance(t).hide()))}))}));